<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Modules Classes Connection MarketState Profile Quote × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Classes Classes Connection MarketState Profile Quote × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote barchart-jerq-aggregator-client-jsA JavaScript library for accessing Barchart's JERQ market data feedA remote server vends Barchart's market data feed. This client library uses socket.io to access the feed and allows clients to: Request basic Profile data for individual symbols Subscribe to Quote updates for individual symbols Subscribe to depth of Book updates for individual symbols SetupThis library is intended for use in the browser or headless JavaScript environments (i.e. Node.js). It has been released via the usual package managers. npmTo import the library as a dependency to your application using npm, use the following command: npm install barchart-jerq-aggregator-client -SbowerTo import the library as a dependency to your application using bower, use the following command: bower install barchart-jerq-aggregator-client -SgitThe git repository is publicaly-accessible here: https://github.com/barchart/jerq-aggregator-client-jsUsageThe Barchart market data server uses socket.io endpoints. This library is a convenience-wrapper. So, instead of making the socket.io connection directly, consumers can make single-line method calls to perform asynchronous operations (e.g. subscribe quotes, subscribe prices, get profile). Simple Node.js Example var jerqAggregatorClient = require('barchart-jerq-aggregator-client'); var connection = new jerqAggregatorClient.Connection(); connection.connect('jerq-aggregator-dev.aws.barchart.com') .then(function() { connection.on('marketUpdate', function(change) { console.log(change); }, [ 'APPL', 'MSFT' ]); });Simple Browser ExampleAdd a script tag and access the global variable Barchart.StreamingData &lt;script src=&quot;dist/barchart-jerq-aggregator.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var connection = new Barchart.StreamingData.Connection(); connection.connect('jerq-aggregator-dev.aws.barchart.com') .then(function() { connection.on('marketUpdate', function(change) { console.log(change); }, [ 'APPL', 'MSFT' ]); }); &lt;/script&gt;ExampleA sample user interface can be found here: ./example/example.htmlOr, you can load the hosted example page here: https://examples.aws.barchart.com/jerq-aggregator-client-js/example.html ConnectingAfter creating an instance of the Barchart.StreamingData.Connection object, call the &quot;connect&quot; function. This function has three arguments (see below) and returns a promise. host, required, string, the name of the remote host. secure, optional, boolean, forces connection to secure (or unsecure mode), omit to auto-detect. port, optional, number, the port to use, omit to auto-detect. Connection Object OperationsAfter you created an instance of the Connection object (see above), you can: Request instrument profiles, quote, exchanges Subscribe to (and unsubscribe from) quote changes, Subscribe to (and unsubscribe from) price changes, Subscribe to (and unsubscribe from) book changes, and Subscribe to (and unsubscribe from) exchange status changes, and Subscribe to (and unsubscribe from) server timestamp updates. Lookup Exchange StatusThis promise-based request will return the most recent information about an exchange. connection.getMarketState().lookupExchange('NYSE') .then(function(exchange) { console.log(JSON.stringify(exchange)); });Get ProfileThis function will return a profile from the client-side cache. This function is synchronous and may return uninitialized or stale data. The profile instance is guaranteed to be initialized if a quote or price subscription is active and at least once quote/price message has been received. var profile = connection.getMarketState().getProfile('ESH6'); var initialized = profile.getIsInitialized();Get ExchangeThis function will return an exchange from the client-side cache. Unlike the &quot;lookupExchange&quot; function, this function is synchronous and may return uninitialized or stale data. var exchange = connection.getMarketState().getProfile('NYSE'); var initialized = exchange.getIsInitialized();Get QuoteThis function will return a quote from the client-side cache. This function is synchronous and may return uninitialized or stale data. var quote = connection.getMarketState().getQuote('IBM'); var initialized = Quote.getIsInitialized(quote);Subscribe to Instrument Profile ChangesThis subscription will notify you each time an instrument's profile changes. This is an infrequent occurrence and mostly occurs when using a &quot;reference&quot; symbol (e.g. ZC*1 is a reference symbol for the front month of corn futures). Please note: this subscription will only work if you have also subscribed to &quot;quote changes&quot; or &quot;price changes&quot; for the same symbol. var onProfileChange = function(profile) { // a profile instance (see lib/market/Profile.js) }; // Begin receiving notifications when profile changes connection.on('profileChange', onProfileChange, 'ZC*1'); // Stop receiving notifications connection.off('profileChange', onProfileChange, 'ZC*1');Subscribe to Quote ChangesThis subscription will notify the observing function each time the instrument's quote changes. This subscription is more resource intensive than a subscription to price changes. var onQuoteChange = function(quote) { // a quote instance (see lib/market/Quote.js) }; // Begin receiving notifications when quote changes connection.on('marketUpdate', onQuoteChange, 'ESH6'); // Stop receiving notifications connection.off('marketUpdate', onQuoteChange, 'ESH6');Subscribe to Price ChangesThis subscription will notify the observing function each time the instrument's price changes. This subscription is less resource intensive than a subscription to price changes. var onPriceChange = function(quote) { // a quote instance (see lib/market/Quote.js) }; // Begin receiving notifications each time the best price changes connection.on('marketPriceChange', onPriceChange, 'ESH6', 'TSLA', 'AAPL'); // Stop receiving notifications connection.off('marketPriceChange', onPriceChange, 'ESH6');Subscribe to Book ChangesThis subscription will notify the observing function each time the instrument's book changes. This is a resource intensive subscription. var onBookChange = function(quote) { // a book instance (see lib/market/Book.js) }; // Begin receiving notifications each time the best price changes connection.on('marketDepth', onBookChange, 'ESH6'); // Stop receiving notifications connection.off('marketDepth', onBookChange, 'ESH6');Subscribe to Exchange Status UpdatesThis subscription will notify the observing function each time an exchanges status changes (e.g. open, closed, pre-market, post-market). var onExchangeChange = function(exchanged) { // an exchange instance (see lib/market/Exchange.js) }; // Begin receiving notifications each time the exchange status changes connection.on('exchangeStatus', onExchangeChange, 'NYSE'); // Stop receiving notifications connection.off('exchangeStatus', onExchangeChange, 'NYSE');Subscribe to Server Timestamp Updatesvar onTimestamp = function(timestamp) { console.log(timestamp); }; // Begin receiving timestamp notifications connection.on('timestamp', onTimestamp); // Stop receiving timestamp notifications connection.off('timestamp', onTimestamp);Data FormattingPrice FormattingThe &quot;Quote&quot; object contains a number of price-related properties. These numeric properties are not ideal for human presentation. To format prices for human consumption, first obtain a copy of the &quot;Profile&quot; for the symbol, then call the format function. For example: var profile = null; connection.getMarketState().getProfile('AAPL') .then(function(p) { profile = p; }) ... // Get a user-friendly string for a price property (e.g. bidPrice, // askPrice, lastPrice, previousPrice, tradePrice, etc). var userFriendlyLastPrice = profile.formatPrice(quote.lastPrice); ... // Get a user-friendly string for price change (show a &quot;+&quot; prefix // for positive values). var userFriendlyPriceChange = profile.formatPriceChange(quote.priceChange, true); ... // Get a user-friendly string for percent changes. var userFriendlyPercentChange = profile.formatPercentChange(quote.percentChange, true);Note that there are two price-change functions: Profile.formatPrice(value, includeSign) Profile.formatPriceChange(value, includeSign) There are also two percent-change functions: Profile.formatPercent(value, includeSign) Profile.formatPercentChange(value, includeSign) In both cases, the difference is treatment of zero values. The former will return a value. The latter will always return the string &quot;unch&quot; when given a zero value. Realtime DataDepending on the server you are connecting to, you will most likely be receiving a delayed data feed. If you want more timely data, you have two options. Either you can pay to receive a realtime feed. Or, you can use a psuedo-realtime mode where the client subscribes to all &quot;free&quot; market data sources and provides you with the most recent (and free) information. To use the realtime mode, do the following: var connection = new Barchart.StreamingData.Connection(); connection.connect('my-server') .then(function() { var realtimeConnection = connection.getRealtime(); realtimeSubscription.on(...); });Time FormattingThe &quot;Quote&quot; object has human-readable property called &quot;timeDisplay.&quot; EnvironmentsTestThe development environment can be used for testing, but may be unreliable. var connection = new Barchart.StreamingData.Connection(); connection.connect('jerq-aggregator-test.aws.barchart.com') .then(function() { // connected ... });StagingThe staging environment can be used for testing. var connection = new Barchart.StreamingData.Connection(); connection.connect('jerq-aggregator-stage.aws.barchart.com') .then(function() { // connected ... });Productionconnection.connect('jerq-aggregator-prod.aws.barchart.com') .then(function() { // connected ... });or connection.connect() .then(function() { // connected ... });Unit TestingGulp and Jasmine are used. Execute unit tests, as follows: gulp test × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"Connection.html":{"id":"Connection.html","title":"Class: Connection","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Class: Connection Connection The entry point for interacting with the JERQ Aggregator (a streaming market data server). An instance of this class is responsible managing a connecting to the server, sending commands to the server, parsing the data feed from the server, and maintaining a cache of market data (see Exchange, Quote, and Profile). &lt;protected&gt; new Connection() × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"MarketState.html":{"id":"MarketState.html","title":"Class: MarketState","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Class: MarketState MarketState The cache maintained by a Connection instance. This cache is exposed to consumers via the Connection#getMarketState function. new MarketState() × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"module-utilities_dates.html":{"id":"module-utilities_dates.html","title":"Module: utilities/dates","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Module: utilities/dates Utilities for generating timezone-aware, human-readable timestamps. Methods &lt;inner&gt; formatDate(timestamp [, symbol] [, overrideTimezoneName]) Generates a human-readable date from a timestamp. The following rules are used to determine the timezone to to use. First, if the overrideTimezoneName argument is used. If it doesn't exist, or can't be parsed; the default timezone will be used. If it hasn't been set; then the timezone of the listing exchange will be used -- which is governed by the &quot;symbol&quot; argument. Parameters: Name Type Argument Description timestamp Date | number The timestamp to format. symbol string &lt;optional&gt; The symbol the timezone was taken from. overrideTimezoneName string &lt;optional&gt; The timezone name to use, overriding the default timezone, and ignoring the timezone of the symbol's listing exchange. Returns: Type string &lt;inner&gt; formatQuote(quote [, overrideTimezoneName]) Given a Quote object, outputs the appropriate human-readable timestamp. Depending on the state of the quote, the output may be a time (e.g. &quot;09:31 CT&quot;) or a date (e.g. &quot;06/28/2017&quot;). Parameters: Name Type Argument Description quote Quote The Quote instance to generate a human-readable timestamp for. overrideTimezoneName string &lt;optional&gt; The timezone name to use, overriding the default timezone, and ignoring the timezone of the symbol's listing exchange. Returns: Type string &lt;inner&gt; formatTime(timestamp [, symbol] [, overrideTimezoneName]) Generates a human-readable time from a timestamp. The following rules are used to determine the timezone to to use. First, if the overrideTimezoneName argument is used. If it doesn't exist, or can't be parsed; the default timezone will be used. If it hasn't been set; then the timezone of the listing exchange will be used -- which is governed by the &quot;symbol&quot; argument. Parameters: Name Type Argument Description timestamp Date | number The timestamp to format. symbol string &lt;optional&gt; The symbol the timezone was taken from. overrideTimezoneName string &lt;optional&gt; The timezone name to use, overriding the default timezone, and ignoring the timezone of the symbol's listing exchange. Returns: Type string &lt;inner&gt; getDefaultTimezone() Gets the default timezone. See the formatDate, formatTime, and formatQuote utility functions. Returns: Type String | null &lt;inner&gt; setDefaultTimezone(timezoneName) Sets a default timezone. See the formatDate, formatTime, and formatQuote utility functions. Parameters: Name Type Default Description timezoneName String | null null The name of the timezone to use (e.g. &quot;America/Chicago&quot; or &quot;America/New_York&quot;). See moment.js for a complete list of valid values. Returns: - If true, the default timezone was set to the desired value. Otherwise, the default timezone was cleared. Type Boolean × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"Profile.html":{"id":"Profile.html","title":"Class: Profile","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Class: Profile Profile The metadata which describes an instrument. The instance for a specific instrument can be obtained from the MarketState#getProfile function; however, the instance will not be initialized until a subscription has been established (see Connection#on). Instances are mutable; however, the Connection is responsible for processing the market data feed from the server and updating these instances. Consequently, consumers should not make modifications. new Profile() Members symbol Properties: Name Type Description symbol string the instrument's symbol timezoneName Properties: Name Type Description timezoneName string The timezone used to output human-readable dates and time. × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "},"Quote.html":{"id":"Quote.html","title":"Class: Quote","body":" Documentation Modules utilities/dates Classes ConnectionMarketStateProfileQuote Class: Quote Quote Current market conditions for an instrument. The instance for a specific instrument can be obtained from the MarketState#getQuote function; however, the instance will not be initialized (or reflect the current conditions) until a subscription has been established (see Connection#on). Instances are mutable; however, the Connection is responsible for processing the market data feed from the server and updating these instances. Consequently, consumers should not make modifications. new Quote(symbol) Parameters: Name Type Description symbol string The instrument's symbol. Members flag Properties: Name Type Description flag string Current market status, will have one of three values: p, s, or undefined symbol Properties: Name Type Description symbol string The instrument's symbol. × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-29T10:04:58-05:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
