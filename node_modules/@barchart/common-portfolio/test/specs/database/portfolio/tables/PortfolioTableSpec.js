var DynamoProvider = require('@barchart/common-node-js/aws/DynamoProvider');

var PortfolioTable = require('./../../../../../database/tables/PortfolioTable');

class MockDynamoProvider extends DynamoProvider {
	constructor() {
		super({ region: 'ignored', prefix: 'mock', apiVersion: 'ignored' });
	}

	start() {
		return Promise.resolve(this._started = true);
	}
}

describe('When a PortfolioTable is created', function() {
	'use strict';

	var portfolio;

	beforeEach(function() {
		portfolio = new PortfolioTable(new MockDynamoProvider());
	});

	it('the table definition should be valid', function() {
		let valid;

		try {
			portfolio.definition.validate();

			valid = true;
		} catch (e) {
			valid = false;
		}

		expect(valid).toEqual(true);
	});
});