var DynamoProvider = require('@barchart/common-node-js/aws/DynamoProvider');

var TransactionTable = require('./../../../../../database/tables/TransactionTable');

class MockDynamoProvider extends DynamoProvider {
	constructor() {
		super({ region: 'ignored', prefix: 'mock', apiVersion: 'ignored' });
	}

	start() {
		return Promise.resolve(this._started = true);
	}
}

describe('When a TransactionTable is created', function() {
	'use strict';

	var transaction;

	beforeEach(function() {
		transaction = new TransactionTable(new MockDynamoProvider());
	});

	it('the table definition should be valid', function() {
		let valid;

		try {
			transaction.definition.validate();

			valid = true;
		} catch (e) {
			valid = false;
		}

		expect(valid).toEqual(true);
	});
});